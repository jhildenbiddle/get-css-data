/*!
 * get-css-data
 * v1.6.3
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2020 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function e(e,o={}){const t={mimeType:o.mimeType||null,onBeforeSend:o.onBeforeSend||Function.prototype,onSuccess:o.onSuccess||Function.prototype,onError:o.onError||Function.prototype,onComplete:o.onComplete||Function.prototype},n=Array.isArray(e)?e:[e],r=Array.apply(null,Array(n.length)).map(e=>null);function l(e=""){return!("<"===e.trim().charAt(0))}function s(e,o){t.onError(e,n[o],o)}function c(e,o){const l=t.onSuccess(e,n[o],o);e=!1===l?"":l||e,r[o]=e,-1===r.indexOf(null)&&t.onComplete(r)}const u=document.createElement("a");n.forEach((e,o)=>{if(u.setAttribute("href",e),u.href=String(u.href),Boolean(document.all&&!window.atob)&&u.host.split(":")[0]!==location.host.split(":")[0]){if(u.protocol===location.protocol){const t=new XDomainRequest;t.open("GET",e),t.timeout=0,t.onprogress=Function.prototype,t.ontimeout=Function.prototype,t.onload=function(){l(t.responseText)?c(t.responseText,o):s(t,o)},t.onerror=function(e){s(t,o)},setTimeout((function(){t.send()}),0)}else console.warn(`Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (${e})`),s(null,o)}else{const n=new XMLHttpRequest;n.open("GET",e),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),t.onBeforeSend(n,e,o),n.onreadystatechange=function(){4===n.readyState&&(200===n.status&&l(n.responseText)?c(n.responseText,o):s(n,o))},n.send()}})}function o(e,o=location.href){const t=document.implementation.createHTMLDocument(""),n=t.createElement("base"),r=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(r),n.href=o,r.href=e,r.href}export default function(t){const n=/\/\*[\s\S]+?\*\//g,r=/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g,l={rootElement:t.rootElement||document,include:t.include||'style,link[rel="stylesheet"]',exclude:t.exclude||null,filter:t.filter||null,useCSSOM:t.useCSSOM||!1,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},s=Array.apply(null,l.rootElement.querySelectorAll(l.include)).filter(e=>{return o=e,t=l.exclude,!(o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector).call(o,t);var o,t}),c=Array.apply(null,Array(s.length)).map(e=>null);function u(){if(-1===c.indexOf(null)){const e=c.join("");l.onComplete(e,c,s)}}function i(o,t,n,r){const s=l.onSuccess(o,n,r);(function o(t,n,r,s,c=[],u=[]){const i=a(t,r,u);i.rules.length?e(i.absoluteUrls,{onBeforeSend(e,o,t){l.onBeforeSend(e,n,o)},onSuccess(e,o,t){const r=l.onSuccess(e,n,o),s=a(e=!1===r?"":r||e,o,u);return s.rules.forEach((o,t)=>{e=e.replace(o,s.absoluteRules[t])}),e},onError(e,l,a){c.push({xhr:e,url:l}),u.push(i.rules[a]),o(t,n,r,s,c,u)},onComplete(e){e.forEach((e,o)=>{t=t.replace(i.rules[o],e)}),o(t,n,r,s,c,u)}}):s(t,c)})(o=void 0!==s&&!1===Boolean(s)?"":s||o,n,r,(function(e,o){null===c[t]&&(o.forEach(e=>l.onError(e.xhr,n,e.url)),!l.filter||l.filter.test(e)?c[t]=e:c[t]="",u())}))}function a(e,t,l=[]){const s={};return s.rules=(e.replace(n,"").match(r)||[]).filter(e=>-1===l.indexOf(e)),s.urls=s.rules.map(e=>e.replace(r,"$1")),s.absoluteUrls=s.urls.map(e=>o(e,t)),s.absoluteRules=s.rules.map((e,n)=>{const r=s.urls[n],l=o(s.absoluteUrls[n],t);return e.replace(r,l)}),s}s.length?s.forEach((t,n)=>{const r=t.getAttribute("href"),s=t.getAttribute("rel"),a="LINK"===t.nodeName&&r&&s&&"stylesheet"===s.toLowerCase(),p="STYLE"===t.nodeName;if(a)e(r,{mimeType:"text/css",onBeforeSend(e,o,n){l.onBeforeSend(e,t,o)},onSuccess(e,l,s){const c=o(r,location.href);i(e,n,t,c)},onError(e,o,r){c[n]="",l.onError(e,t,o),u()}});else if(p){let e=t.textContent;l.useCSSOM&&(e=Array.apply(null,t.sheet.cssRules).map(e=>e.cssText).join("")),i(e,n,t,location.href)}else c[n]="",u()}):l.onComplete("",[])}
//# sourceMappingURL=get-css-data.esm.min.js.map
